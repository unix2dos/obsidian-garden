---
{"aliases":[],"tags":[],"title":"æŠ€æœ¯å¡ç‰‡ç¬”è®°","date":"2025-06-01T07:55:23+08:00","date_modify":"2025-08-10T22:33:13+08:00","dg-publish":true,"permalink":"/Publish/æŠ€æœ¯å¡ç‰‡ç¬”è®°/","dgPassFrontmatter":true,"created":"2025-06-01T07:55:23+08:00","updated":"2025-08-10T22:33:13+08:00"}
---


# 2025-08-10 Docker Image None

```bash
docker images æœ‰å¾ˆå¤š none, ä¼šå ç”¨ç£ç›˜å—ï¼Ÿæ€ä¹ˆæ¸…ç†

<none>Â <none>Â 6038648f7701 9 minutes ago 428MB  
<none>Â <none>Â aeed82987cc4 9 minutes ago 428MB
```

```bash
docker image prune -f
```

# 2025-08-04 Bypass æ’ä»¶

<https://gitflic.ru/project/magnolia1234/bypass-paywalls-chrome-clean>

# 2025-07-31 æ²‰æµ¸å¼ç¿»è¯‘

 AI å¤§å¸ˆï¼š<https://linux.do/t/topic/517192>

# 2025-07-30 Mac å·²æŸå App è§£å†³æ–¹æ³•

```bash
xattr -cr /Applications/Imagine.app
```

å¼ºåˆ¶ã€é€’å½’åœ°æ¸…é™¤ "Imagine.app" è¿™ä¸ªåº”ç”¨ç¨‹åºçš„æ‰€æœ‰æ‰©å±•å±æ€§ï¼ˆextended attributesï¼‰ã€‚

è¿™å°±åƒæ˜¯ç»™è¿™ä¸ª App " æ´—äº†ä¸ªæ¾¡ "ï¼Œå»æ‰äº†å®ƒèº«ä¸Šæ‰€æœ‰é¢å¤–çš„ " æ ‡ç­¾ " å’Œ " æ³¨é‡Š "ï¼Œè®©ç³»ç»Ÿè®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ª " å¹²å‡€ " çš„ã€å¯ä¿¡ä»»çš„ç¨‹åºã€‚

å½“ä½ ä»ç½‘ä¸Šä¸‹è½½ä¸€ä¸ª App æ—¶ï¼ŒmacOS ä¼šè‡ªåŠ¨ç»™è¿™ä¸ª App æ–‡ä»¶ï¼ˆä»¥åŠå®ƒé‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶ï¼‰è´´ä¸Šä¸€ä¸ªç‰¹æ®Šçš„æ‰©å±•å±æ€§ï¼Œå«åšÂ `com.apple.quarantine`ï¼ˆè‹¹æœéš”ç¦»åŒºï¼‰ã€‚è¿™ä¸ª " éš”ç¦» " æ ‡ç­¾å°±åƒä¸€ä¸ªåŒ…è£¹ä¸Šçš„ " æ¥æºä¸æ˜ï¼Œè¯·å°å¿ƒå¼€ç®± " çš„è­¦å‘Šè´´çº¸ã€‚

å½“ä½ ç¬¬ä¸€æ¬¡å°è¯•æ‰“å¼€è¿™ä¸ª App æ—¶ï¼ŒGatekeeper å°±ä¼šæ£€æŸ¥ï¼š

1. è¿™ä¸ª App æ˜¯å¦æ¥è‡ª App Storeï¼Ÿ
2. å¦‚æœä¸æ˜¯ï¼Œå®ƒæ˜¯å¦æœ‰è‹¹æœè®¤è¯çš„å¼€å‘è€…ç­¾åï¼Ÿ
3. å®ƒèº«ä¸Šæœ‰æ²¡æœ‰Â `com.apple.quarantine`Â è¿™ä¸ª " éš”ç¦» " æ ‡ç­¾ï¼Ÿ

å¦‚æœä¸€ä¸ª App æ˜¯ä»éå®˜æ–¹ç½‘ç«™ä¸‹è½½çš„ï¼Œå¯èƒ½æ²¡æœ‰åˆæ³•çš„å¼€å‘è€…ç­¾åï¼ŒmacOS å°±ä¼šå› ä¸ºè¿™ä¸ª " éš”ç¦» " æ ‡ç­¾è€Œé˜»æ­¢ä½ æ‰“å¼€å®ƒï¼Œå¹¶æ˜¾ç¤ºç±»ä¼¼è¿™æ ·çš„è­¦å‘Šï¼š

- " æ— æ³•æ‰“å¼€ 'Imagine.app'ï¼Œå› ä¸º Apple æ— æ³•æ£€æŸ¥å…¶æ˜¯å¦åŒ…å«æ¶æ„è½¯ä»¶ã€‚"
- " æ‰“ä¸å¼€ 'Imagine.app'ï¼Œå› ä¸ºå®ƒæ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€…ã€‚"
- æœ‰æ—¶ç”šè‡³ä¼šè¯´ " æ–‡ä»¶å·²æŸå "ã€‚

è€ŒÂ `xattr -cr /Applications/Imagine.app`Â è¿™ä¸ªå‘½ä»¤ï¼Œæœ€å…³é”®çš„ä½œç”¨å°±æ˜¯æ’•æ‰äº†Â `com.apple.quarantine`Â è¿™ä¸ª " éš”ç¦» " æ ‡ç­¾ï¼

å½“ä½ ç§»é™¤äº†è¿™ä¸ªæ‰©å±•å±æ€§åï¼ŒGatekeeper å†æ¬¡æ£€æŸ¥æ—¶ï¼Œå°±çœ‹ä¸åˆ°é‚£ä¸ªè­¦å‘Šæ ‡ç­¾äº†ã€‚å®ƒä¼šè®¤ä¸ºè¿™ä¸ª App ä¸æ˜¯ä»ç½‘ä¸Šä¸‹è½½çš„å±é™©æ–‡ä»¶ï¼ˆæˆ–è€…ä½ å·²ç»å¯¹å…¶è´Ÿè´£ï¼‰ï¼Œäºæ˜¯å°±æ”¾è¡Œäº†ï¼Œä½ è‡ªç„¶ä¹Ÿå°±å¯ä»¥æ­£å¸¸æ‰“å¼€å®ƒäº†ã€‚

# 2025-07-21 ç»ˆç«¯å¤åˆ¶å’Œæœç´¢ä½“éªŒ

## æœç´¢

- cmd + f ï¼š æ˜¯ Alacritty çš„åŠŸåŠ³
- tmux è¿›å…¥å¤åˆ¶æ¨¡å¼ï¼Œ/ å¯ä»¥æœç´¢ï¼Œå‰ææ˜¯éœ€è¦è®¾ç½® vi æ¨¡å¼
	- set -g status-keys vi
	- set -g mode-keys vi

## å¤åˆ¶

- é¼ æ ‡é€‰ä¸­å°±å¤åˆ¶ï¼Œæ€ä¹ˆåšåˆ°çš„
	- Alacritty çš„å®ç°
		- [selection] save_to_clipboard = true
	- tmux çš„å®ç°
		- é¼ æ ‡è¿›å…¥å¤åˆ¶æ¨¡å¼ï¼Œå†å‘ç»™ pbcopy `# bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"`
- é¼ æ ‡æ¨¡å¼ä¸‹ï¼ŒåŒå‡»å•è¯æ²¡æœ‰ååº”ï¼Œå¯ä»¥æŒ‰ä½ Shift ï¼Œå†åŒå‡»å•è¯ã€‚
- ç¥çº§æ’ä»¶ï¼šMorantron/tmux-fingers

# 2025-07-20 Ishot è´´å›¾å’Œå¤šçª—å£æˆªå›¾é…åˆ

è´´å›¾ï¼šæˆªå›¾åç‚¹å‡»è´´å›¾æŒ‰é’®ã€‚

å¤šçª—å£ï¼šæŒ‰ä¸‹æˆªå›¾æŒ‰é’®ï¼Œå†æŒ‰ shiftï¼Œç‚¹å¤šä¸ªçª—å£ï¼Œç„¶åæ¾å¼€å¿«æ·é”®ã€‚

# 2025-07-19 127.0.0.1 å’Œ Localhost çš„åŒºåˆ«

- 127.0.0.1ï¼šæ˜¯ä¸€ä¸ªå…·ä½“çš„ IP åœ°å€
- localhostï¼šæ˜¯ä¸€ä¸ªä¸»æœºåï¼ˆhostnameï¼‰ï¼Œéœ€è¦è¢«è§£ææˆ IP åœ°å€: `localhost â†’ DNS è§£æ/hosts æ–‡ä»¶ â†’ 127.0.0.1

| ç‰¹æ€§      | 127.0.0.1                                     | localhost                                                           |
| ------- | --------------------------------------------- | ------------------------------------------------------------------- |
| ç±»å‹      | IP åœ°å€ (IP Address)                            | ä¸»æœºå (Hostname)                                                      |
| æ‰€å±å±‚çº§    | ç½‘ç»œå±‚ (Network Layer)                           | åº”ç”¨å±‚ (Application Layer)                                             |
| å·¥ä½œæ–¹å¼    | ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€è§£æã€‚                                    | éœ€è¦é€šè¿‡ç³»ç»Ÿè§£ææˆä¸€ä¸ª IP åœ°å€åæ‰èƒ½ä½¿ç”¨ã€‚                                             |
| å¯å˜æ€§     | æ ‡å‡†å›ºå®šã€‚å®ƒæ˜¯ä¸€ä¸ªç”± IETF (äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„) æ ‡å‡†åŒ–çš„ç‰¹æ®Šç”¨é€”åœ°å€ï¼Œæ°¸è¿œæŒ‡å‘æœ¬æœºã€‚ | ç†è®ºä¸Šå¯é…ç½®ã€‚è™½ç„¶å®ƒé»˜è®¤æŒ‡å‘Â `127.0.0.1`ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹Â `hosts`Â æ–‡ä»¶è®©å®ƒæŒ‡å‘å…¶ä»–åœ°å€ï¼ˆä½†å¼ºçƒˆä¸å»ºè®®è¿™æ ·åšï¼ï¼‰ã€‚ |
| IPV4/V6 | ä»…æ”¯æŒ IPv4                                      | IPv4:Â `127.0.0.1` IPv6:Â `::1 `                                      |

## Mysql è¿æ¥çš„åŒºåˆ«

```bash
// ä½¿ç”¨ localhost - é»˜è®¤ä½¿ç”¨ Unix socket è¿æ¥ï¼ŒSocket æ–‡ä»¶é€šä¿¡ç»•è¿‡äº†æ•´ä¸ªç½‘ç»œåè®®æ ˆï¼Œæ²¡æœ‰ TCP æ¡æ‰‹ã€æ•°æ®åŒ…å°è£…/è§£å°è£…ç­‰å¼€é”€ï¼Œå»¶è¿Ÿæ›´ä½ã€‚	
$conn = new mysqli("localhost", "user", "pass");
// ä½¿ç”¨ 127.0.0.1 - å¼ºåˆ¶ä½¿ç”¨ TCP/IP è¿æ¥
$conn = new mysqli("127.0.0.1", "user", "pass");


// å³ä½¿æ˜¯ localhostï¼Œåªè¦æŒ‡å®šäº†ç«¯å£ï¼Œå°±ä¼šå¼ºåˆ¶ä½¿ç”¨ TCP/IP
$conn = new mysqli("localhost:3306", "user", "pass");
// è¿™è¡Œä»£ç å’Œä¸Šé¢é‚£è¡Œçš„æ•ˆæœæ˜¯å®Œå…¨ä¸€æ ·çš„
$conn = new mysqli("127.0.0.1:3306", "user", "pass");
```

- åœºæ™¯ä¸€ï¼šä½¿ç”¨ `localhost` å¤±è´¥ï¼Œä½†ç”¨ `127.0.0.1` æˆåŠŸã€‚
	- åŸå› ï¼šå¾ˆå¯èƒ½æ˜¯ MySQL æœåŠ¡å™¨æ²¡æœ‰é…ç½®ä½¿ç”¨ Socket æ–‡ä»¶ï¼Œæˆ–è€… Socket æ–‡ä»¶çš„è·¯å¾„ä¸æ­£ç¡®/æƒé™é”™è¯¯ã€‚ä½†æœåŠ¡å™¨é…ç½®äº†ç›‘å¬ TCP ç«¯å£Â `3306`ã€‚
- åœºæ™¯äºŒï¼šä½¿ç”¨ `127.0.0.1` å¤±è´¥ï¼Œä½†ç”¨ `localhost` æˆåŠŸã€‚
	- åŸå› ï¼šè¿™é€šå¸¸æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘çš„é…ç½®ã€‚ç®¡ç†å‘˜å¯èƒ½åœ¨ MySQL é…ç½®æ–‡ä»¶ (`my.cnf`) ä¸­åŠ å…¥äº†Â `skip-networking`Â æŒ‡ä»¤ï¼Œè¿™ä¼šå®Œå…¨ç¦ç”¨ MySQL çš„ TCP/IP ç½‘ç»œç›‘å¬ï¼Œåªå…è®¸é€šè¿‡ Socket æ–‡ä»¶è¿›è¡Œæœ¬åœ°è¿æ¥ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢ä»»ä½•æ¥è‡ªç½‘ç»œçš„è¿æ¥å°è¯•ã€‚
- åœºæ™¯ä¸‰ï¼šåœ¨ Windows ç³»ç»Ÿä¸Š
	- åœ¨ Windows ä¸Šï¼Œæ²¡æœ‰ Unix Domain Socketã€‚å› æ­¤ï¼Œ`mysqli`Â ä¼šå°†Â `localhost`Â è§£æä¸ºÂ `127.0.0.1`ï¼Œæœ€ç»ˆä¸¤è€…éƒ½ä¼šä½¿ç”¨ TCP/IP è¿›è¡Œè¿æ¥ã€‚æ‰€ä»¥åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œè¿™ä¸¤è¡Œä»£ç çš„è¡Œä¸ºå’Œæ€§èƒ½å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚

# 2025-07-19 Docker å‘Šåˆ«å®¿ä¸»æœº

```bash
# å¯ä»¥è½»æ¾åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„å®¢æˆ·ç«¯
docker run -it --rm redis:6 redis-cli -h 10.0.114.5
docker run -it --rm redis:7 redis-cli -h 10.0.114.5
```

1. æ— éœ€æœ¬åœ°å®‰è£… Redis å®¢æˆ·ç«¯ï¼Œä¿æŒæœ¬åœ°ç¯å¢ƒæ¸…æ´ã€‚
2. å¯ä»¥è½»æ¾åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„å®¢æˆ·ç«¯ã€‚
3. `-rm`Â ç¡®ä¿å®¹å™¨ç”¨å®Œå³åˆ ï¼Œä¸å ç”¨ç³»ç»Ÿèµ„æºã€‚
4. Docker å®¹å™¨é»˜è®¤å¯ä»¥è®¿é—®å®¿ä¸»æœºèƒ½è®¿é—®çš„ç½‘ç»œã€‚

# 2025-07-19 è®¾ç½®æœåŠ¡å™¨è¯­è¨€ç¯å¢ƒ

è®¾ç½®ç³»ç»Ÿçš„è¯­è¨€ç¯å¢ƒï¼ˆlocaleï¼‰å˜é‡ï¼Œç¡®ä¿ç¨‹åºèƒ½æ­£ç¡®å¤„ç†å„ç§è¯­è¨€çš„å­—ç¬¦ï¼ˆä¸­æ–‡ã€æ—¥æ–‡ã€ç‰¹æ®Šç¬¦å·ç­‰)

- LANG: è®¾ç½®é»˜è®¤çš„è¯­è¨€ç¯å¢ƒ
- LC_ALL: è¦†ç›–æ‰€æœ‰å…¶ä»–çš„ LC_* è®¾ç½®ï¼Œä¼˜å…ˆçº§æœ€é«˜

```bash
export LANG=C.UTF-8 
export LC_ALL=C.UTF-8
```

# 2025-07-19 Watch å‘½ä»¤

`watch -n 1`Â æ˜¯ä¸€ä¸ª Linux/Unix å‘½ä»¤ï¼Œç”¨äºæ¯éš” 1 ç§’é‡å¤æ‰§è¡Œä¸€æ¬¡åé¢çš„å‘½ä»¤ï¼Œå¹¶å®æ—¶æ˜¾ç¤ºè¾“å‡ºç»“æœã€‚

```bash
# æ¯éš”1ç§’æ‰§è¡Œä¸€æ¬¡
watch -n 1 date
# æ¯éš”5ç§’æ‰§è¡Œä¸€æ¬¡
watch -n 5 "ps aux | grep nginx"
# æ”¯æŒå°æ•°ï¼Œæ¯0.5ç§’æ‰§è¡Œä¸€æ¬¡
watch -n 0.5 "netstat -an | grep :80"


# é«˜äº®æ˜¾ç¤ºæ¯æ¬¡è¾“å‡ºçš„å·®å¼‚
watch -d free -m
# æŒç»­é«˜äº®æ‰€æœ‰å˜åŒ–è¿‡çš„å†…å®¹
watch -d=cumulative uptime
```

# 2025-07-15 AWS ElastiCache Serverless æ¨¡å¼

ElastiCache Serverless æ˜¯ä¸€ç§æ— æœåŠ¡å™¨ï¼ˆserverlessï¼‰éƒ¨ç½²æ¨¡å¼ã€‚æ‚¨ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šèŠ‚ç‚¹æ•°é‡ã€åˆ†ç‰‡ï¼ˆshardsï¼‰æˆ–é…ç½®é«˜å¯ç”¨æ€§ï¼›AWS ä¼šè‡ªåŠ¨å¤„ç†è‡ªåŠ¨ç¼©æ”¾ã€æ•…éšœè½¬ç§»å’Œç»´æŠ¤ã€‚ç”¨æˆ·åªéœ€æä¾›é¢„æœŸçš„è¯»/å†™ååé‡ï¼ˆä¾‹å¦‚ï¼Œæ¯ç§’è¯·æ±‚æ•°ï¼‰ï¼Œç³»ç»Ÿä¼šåŠ¨æ€è°ƒæ•´åç«¯èµ„æºã€‚

Serverless æ¨¡å¼éšå¼å¯ç”¨ Redis é›†ç¾¤æ¨¡å¼ï¼ˆCluster Mode Enabledï¼‰ã€‚æ•°æ®ä¼šè¢«è‡ªåŠ¨åˆ†å¸ƒåˆ°å¤šä¸ªå†…éƒ¨åˆ†ç‰‡ï¼ˆshardsï¼‰ä¸Šï¼Œä»¥å®ç°æ°´å¹³æ‰©å±•å’Œé«˜å¯ç”¨æ€§ã€‚

å¦‚æœæ‚¨çš„é…ç½®ç¡®å®æ˜¯ Serverlessï¼Œè¿™æ„å‘³ç€æ‚¨çš„ Redis æ˜¯ä¸€ä¸ªéšå¼é›†ç¾¤ï¼Œä½†ä¸æ˜¯æ‚¨å¯ä»¥æ‰‹åŠ¨æ§åˆ¶çš„ " å¤šç‹¬ç«‹ Master" æ¶æ„ã€‚

## Go ä½¿ç”¨åº“çš„æ¨è

Serverless æä¾›å•ä¸€ç«¯ç‚¹ï¼Œä½†å†…éƒ¨æ˜¯é›†ç¾¤åŒ–çš„ã€‚`bsm/redislock`Â å¯ä»¥æ— ç¼å·¥ä½œï¼Œå› ä¸ºÂ `go-redis/v9`Â æ”¯æŒé€šè¿‡å•ä¸€ç«¯ç‚¹è¿æ¥ Redis Clusterï¼ˆå®ƒä¼šè‡ªåŠ¨å¤„ç†Â `MOVED`Â é‡å®šå‘ï¼‰ã€‚æ‚¨æ— éœ€æ‹…å¿ƒå†…éƒ¨åˆ†ç‰‡ã€‚

 Redlock ç®—æ³•éœ€è¦è¿æ¥å¤šä¸ªç‹¬ç«‹çš„ Redis Master èŠ‚ç‚¹ã€‚åœ¨ Serverless ä¸­ï¼Œè¿™äº›èŠ‚ç‚¹æ˜¯å†…éƒ¨ç®¡ç†çš„ï¼Œæ‚¨æ— æ³•è·å–å®ƒä»¬çš„ç‹¬ç«‹ç«¯ç‚¹ï¼ˆåªæœ‰å•ä¸€ç«¯ç‚¹ï¼‰ã€‚å› æ­¤ï¼Œæ— æ³•å®ç°æ ‡å‡†çš„ Redlockã€‚é«˜å¯ç”¨æ€§ç”± AWS è‡ªåŠ¨å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨ Redlockã€‚æ‰€ä»¥ä¸ç”¨ä½¿ç”¨çº¢é”çš„åº“ã€‚

çœŸæ­£çš„ redis clusterï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `bsm/redislock`

# 2025-07-09 Gin Context å’Œ Context åŒºåˆ«

## Context åŒºåˆ«

- `*gin.Context`Â æ˜¯ Gin æ¡†æ¶è‡ªå·±å®šä¹‰çš„ä¸€ä¸ªç»“æ„ä½“ã€‚å®ƒçš„ä¸»è¦èŒè´£æ˜¯å¤„ç†å’Œå°è£…å•æ¬¡ HTTP è¯·æ±‚å’Œå“åº”çš„æ‰€æœ‰ä¿¡æ¯ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œä¸€ä¸ª "Web å·¥å…·ç®± "ï¼Œå®ƒæä¾›äº†å¤§é‡ä¾¿æ·çš„æ–¹æ³•ã€‚**
- `context.Context`Â æ˜¯ Go è¯­è¨€æ ‡å‡†åº“Â `context`Â åŒ…ä¸­å®šä¹‰çš„ä¸€ä¸ªæ¥å£ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯åœ¨ä¸åŒ API è¾¹ç•Œå’Œ goroutine ä¹‹é—´ä¼ é€’è¯·æ±‚çš„æˆªæ­¢æ—¶é—´ï¼ˆdeadlineï¼‰ã€å–æ¶ˆä¿¡å·ï¼ˆcancellation signalï¼‰ä»¥åŠå…¶ä»–ä¸è¯·æ±‚ç›¸å…³çš„å€¼ã€‚
- `context.Background()`Â æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ã€ç©ºçš„Â `context.Context`ã€‚å®ƒé€šå¸¸ç”¨ä½œæ‰€æœ‰ context é“¾çš„æ ¹èŠ‚ç‚¹ï¼Œå› ä¸ºå®ƒæ°¸è¿œä¸ä¼šè¢«å–æ¶ˆï¼Œæ²¡æœ‰å€¼ï¼Œä¹Ÿæ²¡æœ‰æˆªæ­¢æ—¥æœŸã€‚å®ƒé€‚ç”¨äºé‚£äº›ä¸ä¸ä»»ä½•ç‰¹å®šè¯·æ±‚å…³è”çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šåœ¨Â `main`Â å‡½æ•°ä¸­å¯åŠ¨ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„åå°ä»»åŠ¡ã€‚ä¸€ä¸ªç¨‹åºçš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚

## ä¸šåŠ¡é€»è¾‘åº”è¯¥ä¼ é€’å“ªä¸ª

`*gin.Context`Â ç¡®å®å®ç°äº†Â `context.Context`Â æ¥å£ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œä»»ä½•æ¥å—Â `context.Context`Â ç±»å‹å‚æ•°çš„å‡½æ•°ï¼Œä½ éƒ½å¯ä»¥ç›´æ¥æŠŠÂ `*gin.Context`Â çš„å®ä¾‹Â `c`Â ä¼ é€’ç»™å®ƒã€‚é‚£ä¹ˆï¼Œæ—¢ç„¶å¯ä»¥ï¼Œä¸ºä»€ä¹ˆå‡ ä¹æ‰€æœ‰çš„æœ€ä½³å®è·µå’Œæ•™ç¨‹éƒ½æ¨èä½¿ç”¨Â `c.Request.Context()`Â å‘¢ï¼Ÿ

- `*gin.Context`Â çš„èŒè´£æ˜¯ Web å±‚ã€‚å®ƒæ˜¯ä¸€ä¸ª " èƒ– " å¯¹è±¡ï¼ŒåŒ…å«äº†å¤„ç† HTTP è¯·æ±‚å’Œå“åº”çš„æ‰€æœ‰å·¥å…·ï¼šå‚æ•°è§£æã€JSON æ¸²æŸ“ã€è®¾ç½® Cookieã€ä¸­é—´ä»¶æ§åˆ¶ç­‰ç­‰ã€‚
- ä½ çš„ä¸šåŠ¡é€»è¾‘å±‚ (`fetchUserData`Â å‡½æ•°) æˆ–æ•°æ®è®¿é—®å±‚ (DAO) çš„èŒè´£æ˜¯å¤„ç†ä¸šåŠ¡ï¼Œå®ƒæ ¹æœ¬ä¸åº”è¯¥ï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯ HTTPï¼Œä»€ä¹ˆæ˜¯ JSON å“åº”ï¼Œä»€ä¹ˆæ˜¯ Gin æ¡†æ¶ã€‚

# 2025-07-08 Aws å·çš„ Iops å’Œååé‡

   aws å·çš„ iops ï¼ˆ3000ï¼‰ å’Œ Throughput (125 MiB/s)

- IOPS
	- IOPS (Input/Output Operations Per Second) - æ¯ç§’è¾“å…¥/è¾“å‡ºæ“ä½œæ¬¡æ•°ï¼Œä¸€ç§’é’Ÿå†…å¯ä»¥å¤„ç†çš„è¯»å†™æ“ä½œçš„æ€»æ¬¡æ•°ã€‚
	- IOPS å°±åƒæ˜¯æ¯ç§’é’Ÿèƒ½é€šè¿‡æ”¶è´¹ç«™çš„è´§è½¦æ•°é‡ã€‚æ— è®ºæ¯è¾†è½¦è£…çš„æ˜¯ä¸€ä¸ªå°åŒ…è£¹è¿˜æ˜¯ä¸€æ•´è½¦å®¶å…·ï¼Œå®ƒéƒ½åªç®—ä½œ " ä¸€è¾†è½¦ "ã€‚
	- IOPS å†³å®šäº†ä½ çš„ç¡¬ç›˜ " ååº”æœ‰å¤šå¿« "ï¼Œèƒ½å¦åŒæ—¶å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ã€‚
- Throughput ååé‡ (å…†å­—èŠ‚/ç§’)
	- è¡¡é‡å­˜å‚¨è®¾å¤‡åœ¨ä¸€ç§’é’Ÿå†…å¯ä»¥æˆåŠŸä¼ è¾“çš„æ•°æ®æ€»é‡ï¼Œé€šå¸¸ä»¥Â `MiB/s`Â æˆ–Â `MB/s`Â ä¸ºå•ä½ã€‚
	- Throughput å°±åƒæ˜¯é«˜é€Ÿå…¬è·¯çš„æ€»å®½åº¦ã€‚å®ƒå†³å®šäº†è¿™æ¡è·¯åœ¨åŒä¸€æ—¶é—´å†…æ€»å…±èƒ½æ‰¿è½½å¤šå¤§çš„è½¦æµé‡ï¼ˆæ•°æ®æµï¼‰ã€‚

# 2025-07-07 Mysql å­—ç¬¦é›†å’Œæ’åºè§„åˆ™

```sql
CREATE DATABASE mydb CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci;
```

- utf8mb4: å­—ç¬¦é›†
	- æ”¯æŒå®Œæ•´çš„ Unicode å­—ç¬¦é›†ï¼ˆåŒ…æ‹¬ emoji ğŸ˜Šï¼‰
	- æ¯ä¸ªå­—ç¬¦æœ€å¤šä½¿ç”¨ 4 ä¸ªå­—èŠ‚
	- MySQL 8.0+ çš„é»˜è®¤å­—ç¬¦é›†
	- å…¼å®¹æ€§æœ€å¥½
- 0900: Unicode 9.0.0 æ ‡å‡†
- ai: Accent Insensitiveï¼ˆé‡éŸ³ä¸æ•æ„Ÿï¼‰
- ci: Case Insensitiveï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰

# 2025-07-06 FP16 å’Œ BF16 åŒºåˆ«

FP16 å’Œ BF16 æ˜¯ä¸¤ç§ä¸åŒçš„ 16 ä½æµ®ç‚¹æ•°æ ¼å¼ï¼Œä¸»è¦åŒºåˆ«åœ¨äºä½æ•°åˆ†é…ã€‚

- FP16 çš„èŒƒå›´å°å¾—å¤šï¼Œå®¹æ˜“å‡ºç°ä¸Šæº¢å’Œä¸‹æº¢ï¼ŒBF16 çš„èŒƒå›´ä¸ FP32 ç›¸åŒï¼ˆå› ä¸ºæŒ‡æ•°ä½ç›¸åŒï¼‰
- FP16 ç²¾åº¦æ›´é«˜ï¼ˆ10 ä½å°¾æ•° vs 7 ä½å°¾æ•°ï¼‰

ä½¿ç”¨åœºæ™¯ï¼š

- æ¨¡å‹è®­ç»ƒä¸­ï¼Œæ¢¯åº¦ï¼ˆGradientsï¼‰ç­‰ä¸­é—´å€¼ä¸å®¹æ˜“å› å˜å¾—è¿‡å¤§æˆ–è¿‡å°è€Œæº¢å‡ºï¼ŒBF16 å·²æˆä¸ºä¸»æµé€‰æ‹©ã€‚
- æ¨¡å‹æ¨ç†æ—¶ï¼Œæƒé‡å·²ç»å›ºå®šï¼Œæ•°å€¼èŒƒå›´ç›¸å¯¹ç¨³å®šã€‚æ­¤æ—¶ï¼ŒFP16 æ›´é«˜çš„ç²¾åº¦æœ‰åŠ©äºå¾—åˆ°æ›´å‡†ç¡®çš„æœ€ç»ˆç»“æœã€‚

# 2025-06-25 å¿«é€Ÿåˆ¤æ–­ç§æœ‰å’Œå…¬æœ‰ Ip

è®°ä½å…³é”®æ•°å­—

- ä»¥Â 10.Â å¼€å¤´ â†’ ç§æœ‰ IP
- ä»¥Â 192.168.Â å¼€å¤´ â†’ ç§æœ‰ IP
- ä»¥Â 172.Â å¼€å¤´ï¼Œç¬¬äºŒæ®µåœ¨Â 16-31Â ä¹‹é—´ â†’ ç§æœ‰ IP

| åœ°å€ç±»å‹      | IP èŒƒå›´                       | å£è¯€/è®°å¿†æ³•                        | åˆ¤æ–­              |
| --------- | --------------------------- | ----------------------------- | --------------- |
| **ç§æœ‰ IP** | `10.x.x.x`                  | " ä¸€é›¶ (10) å¼€å¤´ "                | ç§æœ‰          |
| **ç§æœ‰ IP** | `172.16.x.x`Â -Â `172.31.x.x` | " ä¸€ä¸ƒäºŒ (172)ï¼Œåå…­ (16) åˆ°ä¸‰ä¸€ (31)" | ç§æœ‰          |
| **ç§æœ‰ IP** | `192.168.x.x`               | " å¹ºä¹äºŒ (192) ç‚¹å¹ºå…­å…« (168)"       | ç§æœ‰          |
| **ç¯å›åœ°å€**  | `127.0.0.1`                 | å°±æ˜¯å®ƒè‡ªå·±                         | ç‰¹æ®Šåœ°å€ (æœ¬æœº)   |
| **APIPA** | `169.254.x.x`               | `169.254` å¼€å¤´                  | ç‰¹æ®Šåœ°å€ (ç½‘ç»œå¼‚å¸¸) |
| **å…¬æœ‰ IP** | å…¶ä»–æ‰€æœ‰åœ°å€                      | ä¸ç¬¦åˆä»¥ä¸Šä»»ä½•æƒ…å†µ                     | å…¬æœ‰          |

# 2025-06-25 Pkill ä½¿ç”¨æ•™ç¨‹

## Kill å’Œ Pkill çš„åŒºåˆ«

kill å¿…é¡»å…ˆæ‰¾åˆ°è¿›ç¨‹ ID

```bash
ps aux | grep firefox
kill 1234           # ä½¿ç”¨å…·ä½“çš„PID
```

pkill ç›´æ¥ä½¿ç”¨è¿›ç¨‹å

```bash
pkill fire # æ— éœ€çŸ¥é“ PID, å±é™©ï¼šå¯èƒ½åŒ¹é… firefox, firewall ç­‰

pkill -x firefox    # ç²¾ç¡®åŒ¹é…ï¼Œæ›´å®‰å…¨çš„åšæ³•

pkill -f "python script.py" # åŒ¹é…å®Œæ•´çš„å‘½ä»¤è¡Œ
```

## Pkill -f åŒ¹é…å®Œæ•´çš„å‘½ä»¤è¡Œ

`pkill -f`Â çš„ä½œç”¨æ˜¯**åŒ¹é…å®Œæ•´çš„å‘½ä»¤è¡Œ**ï¼Œè€Œä¸å¸¦Â `-f`Â åªåŒ¹é…**è¿›ç¨‹åç§°**ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„åŒºåˆ«ï¼š

```bash
user  1234  python /home/user/scripts/web_server.py --port 8080
user  5678  python /home/user/scripts/data_processor.py --input data.csv
user  9012  python /home/user/scripts/backup.py


# åªåŒ¹é…è¿›ç¨‹å "python"
pkill python
# ç»“æœï¼šä¼šç»ˆæ­¢æ‰€æœ‰ python è¿›ç¨‹ï¼ˆ1234, 5678, 9012ï¼‰

# å°è¯•åŒ¹é…è„šæœ¬åï¼ˆå¤±è´¥ï¼‰
pkill web_server.py
# ç»“æœï¼šä¸ä¼šåŒ¹é…ä»»ä½•è¿›ç¨‹ï¼Œå› ä¸ºè¿›ç¨‹åæ˜¯ "python"ï¼Œä¸æ˜¯ "web_server.py"


# åŒ¹é…å®Œæ•´å‘½ä»¤è¡Œ
pkill -f web_server.py
# ç»“æœï¼šåªç»ˆæ­¢ PID 1234 çš„è¿›ç¨‹

pkill -f "data_processor.py --input"
# ç»“æœï¼šåªç»ˆæ­¢ PID 5678 çš„è¿›ç¨‹

pkill -f "/home/user/scripts/"
# ç»“æœï¼šç»ˆæ­¢æ‰€æœ‰åœ¨è¯¥ç›®å½•ä¸‹çš„è„šæœ¬ï¼ˆ1234, 5678, 9012ï¼‰
```

# 2025-06-24 Where a > ? and B = ? Order by C

mysql çš„ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œwhere a > ? and b = ? order by c ï¼Œæ€ä¹ˆåˆ›å»ºç´¢å¼•ä¼šæ¯”è¾ƒå¥½

- æœ€ç†æƒ³çš„ç´¢å¼•æ˜¯ `INDEX(b, a, c)ã€‚
- order by ä»ç„¶éœ€è¦è¿›è¡Œ filesortï¼Œå› ä¸ºæ— æ³•ä¿è¯ c åˆ—æ˜¯å…¨å±€æœ‰åºçš„ã€‚ä½†æ˜¯æœ‰å¯èƒ½æˆä¸ºè¦†ç›–ç´¢å¼•ï¼ˆselect 3 ä¸ªå­—æ®µï¼‰æ— éœ€å›è¡¨ã€‚

1. **`WHERE b = ?`**ï¼šMySQL é¦–å…ˆä½¿ç”¨ç´¢å¼•çš„ç¬¬ä¸€éƒ¨åˆ†Â `b`ã€‚å› ä¸ºæ˜¯ç­‰å€¼æŸ¥è¯¢ï¼Œå®ƒå¯ä»¥éå¸¸å¿«åœ°å°†æœç´¢èŒƒå›´ç¼©å°åˆ°Â `b`Â ç­‰äºç‰¹å®šå€¼çš„é‚£äº›è¡Œã€‚
2. **`WHERE a > ?`**ï¼šåœ¨å·²ç»ç­›é€‰å‡ºçš„Â `b`Â å€¼ç›¸åŒçš„è¿™ä¸ªå°èŒƒå›´å†…ï¼ŒMySQL æ¥ç€ä½¿ç”¨ç´¢å¼•çš„ç¬¬äºŒéƒ¨åˆ†Â `a`Â æ¥è¿›è¡ŒèŒƒå›´æŸ¥æ‰¾ï¼Œè¿‡æ»¤æ‰ä¸æ»¡è¶³Â `a > ?`Â çš„è¡Œã€‚
3. **`ORDER BY c`**ï¼šç”±äºç´¢å¼•æ˜¯æŒ‰ç…§Â `(b, a, c)`Â çš„é¡ºåºåˆ›å»ºçš„ï¼Œå½“Â `b`Â å’ŒÂ `a`Â çš„å€¼ç¡®å®šåï¼ˆæˆ–è€…åœ¨ä¸€ä¸ªå°çš„èŒƒå›´æ‰«æå†…ï¼‰ï¼Œ`c`Â å­—æ®µåœ¨ç´¢å¼•ä¸­**è‡ªç„¶å°±æ˜¯æœ‰åºçš„**ã€‚å› æ­¤ï¼ŒMySQL å¯ä»¥ç›´æ¥æŒ‰ç…§ç´¢å¼•é¡ºåºè¯»å–æ•°æ®ï¼Œ**é¿å…äº†æ˜‚è´µçš„æ–‡ä»¶æ’åºï¼ˆfilesortï¼‰æ“ä½œ**ã€‚

# 2025-06-14 Alfred å¿«é€Ÿ JSON

- HotKey (cmd + j )-> Run Scripts

```bash
#!/bin/bash

# é¦–å…ˆå¤åˆ¶å½“å‰é€‰ä¸­çš„å†…å®¹
osascript << 'EOF'
tell application "System Events"
    # å¤åˆ¶é€‰ä¸­çš„å†…å®¹
    key code 8 using command down  -- Cmd+C
end tell
EOF

# ç­‰å¾…å¤åˆ¶å®Œæˆ
sleep 0.4

# è·å–å‰ªè´´æ¿å†…å®¹
clipboard_content=$(pbpaste)

# æ£€æŸ¥å‰ªè´´æ¿æ˜¯å¦ä¸ºç©º
if [ -z "$clipboard_content" ]; then
    osascript -e 'display notification "æ²¡æœ‰é€‰ä¸­å†…å®¹æˆ–å¤åˆ¶å¤±è´¥" with title "JSON Editor"'
    exit 1
fi

# æ˜¾ç¤ºå¤åˆ¶æˆåŠŸçš„é€šçŸ¥
osascript -e 'display notification "å·²å¤åˆ¶é€‰ä¸­å†…å®¹" with title "JSON Editor"'

# æ‰“å¼€ç½‘ç«™
open -a "Google Chrome" "https://jsoneditoronline.org/"

# ç­‰å¾…é¡µé¢åŠ è½½
sleep 0.3

# è‡ªåŠ¨ç²˜è´´åˆ°ç¼–è¾‘å™¨ - ä½¿ç”¨æ›´ç¨³å®šçš„æ–¹æ³•
osascript << 'EOF'
tell application "Google Chrome"
    activate
    delay 0.3
end tell

tell application "System Events"
    tell process "Google Chrome"
        # ä½¿ç”¨ Tab é”®å¯¼èˆªåˆ°ç¼–è¾‘åŒºåŸŸ
        key code 48  -- Tab
        delay 0.1
        key code 48  -- Tab
        delay 0.1
        
        # å°è¯•ç‚¹å‡»ç¼–è¾‘åŒºåŸŸï¼ˆå¦‚æœ Tab å¯¼èˆªå¤±è´¥ï¼‰
        try
            click at {500, 400}
            delay 0.2
        end try
        
        # æ¸…ç©ºå¹¶ç²˜è´´å†…å®¹
        key code 0 using command down   -- Cmd+A
        delay 0.2
        key code 9 using command down   -- Cmd+V
        delay 0.2
    end tell
end tell
EOF

osascript -e 'display notification "JSON å·²ç²˜è´´åˆ°ç¼–è¾‘å™¨" with title "JSON Editor"'
```

# 2025-06-14 Http Server çš„ Request.Context è¶…æ—¶

## http.Server è¶…æ—¶

1. **`http.Server.ReadTimeout`**: è¿™æ˜¯ Go æ ‡å‡†åº“ `http.Server` åœ¨**ä¼ è¾“å±‚**çš„è¶…æ—¶ã€‚å®ƒè¦†ç›–äº†ä»æ¥å—è¿æ¥å¼€å§‹ï¼Œåˆ°è¯»å–å®Œæ‰€æœ‰è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰çš„æ—¶é—´ã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰å‘é€å®Œæ•°æ®ï¼Œ`http.Server` ä¼šç›´æ¥å…³é—­è¿æ¥ï¼Œé€šå¸¸ä¼šå¯¼è‡´å®¢æˆ·ç«¯æ”¶åˆ°ä¸€ä¸ª `503 Service Unavailable` å“åº”ã€‚
2. **`http.Server.WriteTimeout`**: è¿™ä¹Ÿæ˜¯ä¼ è¾“å±‚çš„è¶…æ—¶ã€‚å®ƒè¦†ç›–äº†ä» handler æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹å†™å…¥å“åº”ï¼ˆResponseï¼‰åˆ°å“åº”å®Œå…¨å†™å®Œçš„æ—¶é—´ã€‚

- golang å¯åŠ¨ä¸€ä¸ª http.Serverï¼Œ http.Request.Context() æ˜¯æ€ä¹ˆæ§åˆ¶çš„ï¼Ÿ

```bash
func main() {
    server := &http.Server{
        Addr:         ":8080",
        Handler:      http.HandlerFunc(handler),
        ReadTimeout:  10 * time.Second,
        WriteTimeout: 10 * time.Second,
    }
    
    log.Fatal(server.ListenAndServe())
}

```

## Go-zero æ˜¯æ€ä¹ˆæ§åˆ¶çš„ï¼Ÿ

```go
// rest.conf é…ç½®
RestConf:
  Host: 0.0.0.0
  Port: 8888
  Timeout: 30000  # 30ç§’è¶…æ—¶
  
// go-zero è‡ªåŠ¨åº”ç”¨è¶…æ—¶æ§åˆ¶ï¼Œç®€åŒ–ç‰ˆ
func (s *Server) Start() {
	handleError(s.ngin.start(s.router))
}

func newEngine(c RestConf) *engine {
	svr := &engine{
		conf:    c,
		timeout: time.Duration(c.Timeout) * time.Millisecond,
	}
	return svr
}


func (ng *engine) start(router httpx.Router, opts ...StartOption) error {
	// make sure user defined options overwrite default options
	opts = append([]StartOption{ng.withTimeout()}, opts...)
	return internal.StartHttps(ng.conf.Host, ng.conf.Port, ng.conf.CertFile,
		ng.conf.KeyFile, router, opts...)
}

func (ng *engine) withTimeout() internal.StartOption {
	return func(svr *http.Server) {
		timeout := ng.timeout
		if timeout > 0 {
			// è®¾ç½®ä¸ºå…¨å±€è¶…æ—¶çš„ 80%ï¼Œè€ƒè™‘ä¸€ä¸ªæ¶æ„æˆ–æœ‰ bug çš„å®¢æˆ·ç«¯ã€‚å®ƒå‘é€äº†ä¸€ä¸ª Content-Length: 1000000 çš„è¯·æ±‚å¤´ï¼Œä½†å®é™…ä¸Šåªå‘é€äº† 100 å­—èŠ‚çš„æ•°æ®ï¼Œç„¶åå°±ä¸€ç›´ä¿æŒè¿æ¥ä¸å‘é€å‰©ä½™æ•°æ®ã€‚å½“ ReadTimeout å’Œ go-zero çš„åº”ç”¨å±‚è¶…æ—¶åŒæ—¶åˆ°è¾¾æ—¶ï¼Œä¼ è¾“å±‚çš„ ReadTimeout å¯èƒ½ä¼šå…ˆç”Ÿæ•ˆã€‚http.Server ä¼šç›´æ¥ä¸­æ–­è¿æ¥ï¼Œå¹¶è¿”å›ä¸€ä¸ª 503 é”™è¯¯ã€‚503 é€šå¸¸è¢«è®¤ä¸ºæ˜¯æœåŠ¡ä¸å¯ç”¨ï¼Œå¦‚æœä¸Šæ¸¸æœ‰ç±»ä¼¼ Istio çš„æœåŠ¡ç½‘æ ¼æˆ– Nginx ç­‰ä»£ç†ï¼Œå®ƒä»¬å¯èƒ½ä¼šè®¤ä¸ºè¿™ä¸ªæœåŠ¡å®ä¾‹å·²ç»å®•æœºï¼Œä»è€Œè§¦å‘ç†”æ–­æœºåˆ¶ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…ä¸å†å°†æµé‡è½¬å‘åˆ°è¿™ä¸ªå®ä¾‹ï¼Œé€ æˆæœåŠ¡é›ªå´©çš„é£é™©ã€‚ 
			//å°† ReadTimeout è®¾ç½®ä¸ºå…¨å±€è¶…æ—¶çš„ 80%ã€‚è¿™æ ·ï¼Œåœ¨ä¸Šè¿°åœºæ™¯ä¸­ï¼ŒReadTimeout ä¼šæ¯” go-zero çš„åº”ç”¨å±‚è¶…æ—¶å…ˆåˆ°æœŸã€‚ä½†æ˜¯ï¼Œå› ä¸º go-zero çš„è¶…æ—¶æ§åˆ¶æ›´ç²¾ç¡®ï¼Œå®ƒä¼šåœ¨å…¨å±€è¶…æ—¶ï¼ˆ100%ï¼‰åˆ°è¾¾æ—¶ç”±åº”ç”¨å±‚ä¸­é—´ä»¶æ•è·åˆ°è¶…æ—¶ã€‚è¿™ä¸ªä¸­é—´ä»¶ä¼šè¿”å›ä¸€ä¸ªæ›´å‹å¥½çš„ã€å¯æ§çš„é”™è¯¯ï¼ˆä¾‹å¦‚ 408 Request Timeout æˆ–è‡ªå®šä¹‰çš„ä¸šåŠ¡é”™è¯¯ç ï¼‰ï¼Œè€Œä¸æ˜¯ç”±åº•å±‚ http.Server è¿”å›ç²—æš´çš„ 503ã€‚è¿™æ ·å°±é¿å…äº†è§¦å‘ç†”æ–­ï¼Œä¿æŠ¤äº†æœåŠ¡ã€‚æœ¬è´¨ä¸Šæ˜¯è®©åº”ç”¨å±‚ï¼ˆGo-Zeroï¼‰æœ‰æœºä¼šæ¯”ä¼ è¾“å±‚ï¼ˆhttp.Serverï¼‰å…ˆå¤„ç†è¶…æ—¶ã€‚
			svr.ReadTimeout = 4 * timeout / 5
			
			
			// ä¾‹å¦‚ï¼Œtimeout æ˜¯ 5 ç§’ï¼Œä¸šåŠ¡é€»è¾‘æ‰§è¡Œäº† 4.9 ç§’ã€‚å¦‚æœ WriteTimeout == timeout: ä¸šåŠ¡é€»è¾‘åœ¨ 4.9 ç§’æ—¶å¤„ç†å®Œæˆï¼Œgo-zero å¼€å§‹å°†å“åº”æ•°æ®å†™å›ç»™å®¢æˆ·ç«¯ã€‚ä½†æ˜¯ï¼Œç•™ç»™å†™å…¥æ“ä½œçš„æ—¶é—´åªå‰©ä¸‹ 0.1 ç§’ã€‚å¦‚æœå“åº”æ•°æ®æ¯”è¾ƒå¤§ï¼Œæˆ–è€…å®¢æˆ·ç«¯ç½‘ç»œçŠ¶å†µä¸ä½³ï¼Œ0.1 ç§’å†…å¾ˆå¯èƒ½æ— æ³•å®Œæˆå†™å…¥ã€‚è¿™æ—¶ WriteTimeout å°±ä¼šè§¦å‘ï¼Œè¿æ¥è¢«ä¸­æ–­ï¼Œå®¢æˆ·ç«¯åªæ”¶åˆ°äº†ä¸€ä¸ªä¸å®Œæ•´çš„å“åº”ã€‚
			// å°† WriteTimeout è®¾ç½®ä¸ºå…¨å±€è¶…æ—¶çš„ 110%ï¼ˆä¹Ÿå°±æ˜¯ timeout + 10% çš„ç¼“å†²æ—¶é—´ï¼‰ã€‚åœ¨ä¸Šè¿°åœºæ™¯ä¸­ï¼Œå³ä½¿ä¸šåŠ¡é€»è¾‘ç”¨æ»¡äº†å…¨éƒ¨çš„ 5 ç§’ï¼ŒæœåŠ¡å™¨ä»ç„¶æœ‰é¢å¤–çš„ 0.5 ç§’ï¼ˆ5 * 10%ï¼‰æ—¶é—´æ¥å®Œæˆå“åº”çš„å†™å…¥æ“ä½œã€‚è¿™å¤§å¤§å¢åŠ äº†å“åº”èƒ½å¤Ÿè¢«å®Œæ•´å‘é€åˆ°å®¢æˆ·ç«¯çš„æ¦‚ç‡ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯é æ€§ã€‚
			svr.WriteTimeout = 11 * timeout / 10
		}
	}
}


func StartHttp(host string, port int, handler http.Handler, opts ...StartOption) error {
	return start(host, port, handler, func(svr *http.Server) error {
		return svr.ListenAndServe()
	}, opts...)
}

func start(host string, port int, handler http.Handler, run func(svr *http.Server) error,
	opts ...StartOption) (err error) {
	server := &http.Server{
		Addr:    fmt.Sprintf("%s:%d", host, port),
		Handler: handler,
	}
	for _, opt := range opts {
		opt(server)
	}
}
```

# 20250613 Mysql Text é»˜è®¤å€¼é—®é¢˜

MySQL çš„ text å¯ä»¥ not null æœ‰é»˜è®¤å€¼å—ï¼Ÿ MySQL 8.0.13 åŠæ›´é«˜ç‰ˆæœ¬ï¼šå¯ä»¥ã€‚

```bash
-- MySQL 8.0.13+ å¯ä»¥æ­£å¸¸æ‰§è¡Œ
CREATE TABLE test (
    content TEXT NOT NULL DEFAULT ('hello')
);
```

ä¹‹å‰çš„ç‰ˆæœ¬ï¼ŒTEXT ç±»å‹çš„å­—æ®µå¯ä»¥è®¾ç½®ä¸º NOT NULLï¼Œä½†ä¸èƒ½ç›´æ¥è®¾ç½®é»˜è®¤å€¼ã€‚

MySQL çš„ TEXT ç±»å‹å±äºå¤§å¯¹è±¡ï¼ˆLOBï¼‰ï¼Œå­˜å‚¨åœ¨è¡¨çš„è¡Œå¤–ï¼ˆå³å­˜å‚¨ä¸ºæŒ‡é’ˆï¼‰ã€‚ç”±äºå…¶è®¾è®¡é™åˆ¶ï¼ŒMySQL ä¸å…è®¸ç›´æ¥ä¸º TEXT ç±»å‹å­—æ®µè®¾ç½®é»˜è®¤å€¼ï¼Œé™¤éä½¿ç”¨ç‰¹å®šçš„æ–¹æ³•ç»•è¿‡è¿™ä¸ªé™åˆ¶ã€‚

# 20250611 AWS åˆ›å»ºæ•°æ®åº“

åˆ›å»ºæ•°æ®åº“ï¼šabc-analyze-db

- vpc é€‰å¯¹
- vpc security group é€‰å¯¹

æŸ¥çœ‹å¯†ç ï¼šSecrets Manager

åˆ›å»ºæ–°ç”¨æˆ·å’Œå¯†ç 

```bash
docker exec -it mysql mysql -habc-analyze-db.xxxx.us-west-2.rds.amazonaws.com -uadmin -p'I9s87' -Dabc

# æ·»åŠ æ–°ç”¨æˆ·
CREATE USER 'abc_rw'@'%' IDENTIFIED BY 'mima';
GRANT SELECT, INSERT, UPDATE, DELETE ON picplus.* TO 'abc_rw'@'%';
GRANT CREATE, DROP, ALTER, INDEX ON picplus.* TO 'abc_rw'@'%';
FLUSH PRIVILEGES;


# æŸ¥çœ‹
SELECT User, Host FROM mysql.user WHERE User = 'abc_rw';
SHOW GRANTS FOR 'abc_rw'@'%';


# æœ€å
abc-analyze-db.xxxx.us-west-2.rds.amazonaws.com
abc_rw
mima
```

# 20250610 AWS åˆ›å»ºæ•°æ®åº“ä»åº“

æ•°æ®åº“ -> Action-> Create read replica ï¼ˆé»˜è®¤é€‰é¡¹ï¼‰

æ³¨æ„è´¦å·å’Œå¯†ç å’Œä¸»åº“éƒ½ä¸€æ ·ã€‚

# 20250607 Deeplx å…è´¹ç¿»è¯‘æœåŠ¡

```bash
# deeplx é…åˆ bobï¼Œæˆ‘éƒ¨ç½²åæ— æ³•ä½¿ç”¨ï¼Œå‡ºç° 503
é¡¹ç›®ï¼š https://github.com/OwO-Network/DeepLX
éƒ¨ç½²ï¼š  docker run -itd -p 1188:1188 ghcr.io/owo-network/deeplx:latest
bobæ’ä»¶ï¼šhttps://github.com/missuo/bob-plugin-deeplx


# linuxdo ç«™é•¿æä¾›çš„å…è´¹ deeplxï¼Œå¯ä»¥ç”¨åœ¨ bob å’Œ æ²‰æµ¸å¼ç¿»è¯‘é‡Œ
https://connect.linux.do/
https://api.deeplx.org/ä½ çš„key/translate
```

# 20250606 æ¸…ç† Git åˆ†æ”¯

```bash
# æ¸…ç†è¿œç¨‹åˆ é™¤çš„åˆ†æ”¯
git fetch --prune --prune-tags


# åˆ é™¤æ‰€æœ‰è¿œç¨‹å·²åˆ é™¤çš„æœ¬åœ°åˆ†æ”¯
git branch -vv | grep ': gone]' | awk '{print $1}' | xargs git branch -d
```

# 20250604 Socket å’Œ Websocket

| ç‰¹æ€§        | Socket       | WebSocket    |
| --------- | ------------ | ------------ |
| **åè®®å±‚çº§**  | ä¼ è¾“å±‚ï¼ˆTCP/UDPï¼‰ | åº”ç”¨å±‚ï¼ˆåŸºäº HTTPï¼‰ |
| **ä½¿ç”¨åœºæ™¯**  | ä»»ä½•ç½‘ç»œåº”ç”¨       | Web åº”ç”¨       |
| **æµè§ˆå™¨æ”¯æŒ** | ä¸ç›´æ¥æ”¯æŒ        | åŸç”Ÿæ”¯æŒ         |
| **è¿æ¥å»ºç«‹**  | ç›´æ¥ TCP è¿æ¥    | HTTP æ¡æ‰‹åå‡çº§   |
| **æ•°æ®æ ¼å¼**  | äºŒè¿›åˆ¶/æ–‡æœ¬       | å¸§æ ¼å¼ï¼ˆæ–‡æœ¬/äºŒè¿›åˆ¶ï¼‰  |
| **è·¨åŸŸ**    | æ— é™åˆ¶          | å—åŒæºç­–ç•¥å½±å“      |

## Socket

1. ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹ TCP è¿æ¥
2. ç›´æ¥å‘é€/æ¥æ”¶æ•°æ®
3. å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥

- æ›´çµæ´»ï¼Œå¯ä»¥å®ç°å„ç§åè®®
- æ€§èƒ½æ›´é«˜ï¼Œå¼€é”€æ›´å°
- å¯ä»¥ä½¿ç”¨ UDP å®ç°ä½å»¶è¿Ÿé€šä¿¡
- æµè§ˆå™¨ä¸èƒ½ç›´æ¥ä½¿ç”¨

## WebSocket

1. HTTP è¯·æ±‚ï¼ˆåŒ…å« Upgrade å¤´ï¼‰
2. æœåŠ¡å™¨è¿”å› 101 çŠ¶æ€ç 
3. åè®®å‡çº§ä¸º WebSocket
4. åŒå‘é€šä¿¡

- æµè§ˆå™¨åŸç”Ÿæ”¯æŒ
- ä¸ HTTP å…±ç”¨ç«¯å£ï¼ˆ80/443ï¼‰ï¼Œ å¯ä»¥ç©¿é€å¤§å¤šæ•°é˜²ç«å¢™
- ä»…æ”¯æŒ TCPï¼Œä¸æ”¯æŒ UDP
- æœ‰ä¸€å®šçš„åè®®å¼€é”€

## å¦‚ä½•é€‰æ‹©

é€‰æ‹© Socket ï¼šä¸éœ€è¦æµè§ˆå™¨è®¿é—®ï¼Œéœ€è¦ UDP æˆ–è‡ªå®šä¹‰åè®®ï¼Œè¿½æ±‚æè‡´æ€§èƒ½ï¼Œå¼€å‘ç³»ç»Ÿçº§åº”ç”¨ã€‚

é€‰æ‹© WebSocket ï¼šéœ€è¦æµè§ˆå™¨å®æ—¶é€šä¿¡ï¼Œå¼€å‘ Web åº”ç”¨ï¼Œéœ€è¦è·¨å¹³å°å…¼å®¹ï¼Œå¸Œæœ›ç®€åŒ–å¼€å‘æµç¨‹ã€‚

ä¸¤è€…å¯ä»¥é…åˆä½¿ç”¨ï¼Œæ¯”å¦‚åç«¯æœåŠ¡é—´ç”¨ Socket é€šä¿¡ï¼Œå‰ç«¯ä¸åç«¯ç”¨ WebSocket é€šä¿¡ã€‚

# 20250602 CloudFlare ä½œç”¨

- åŸŸå DNS è§£æï¼Œé€‰æ‹©ä»£ç†æ¨¡å¼å¯ä»¥è§£å†³è¢«å¢™
- ç¼“å­˜ -> Tiered Cache -> å¼€å¯
- é€Ÿåº¦ -> ä¼˜åŒ– -> å»ºè®®çš„éƒ½æ‰“å¼€ï¼ˆä¸è¦å¼€ç¼©çŸ­åŒ…å« JavaScript çš„é¡µé¢çš„ç»˜åˆ¶æ—¶é—´ï¼‰

# 20250601 åŸŸå DNS è§£æ CloudFlare

é˜¿é‡Œäº‘çš„åŸŸå DNS å¯ä»¥é…ç½® CloudFlare çš„ï¼Œåé¢è§£æéƒ½å¯ä»¥åœ¨ CloudFlare ä¸Šæ“ä½œäº†ã€‚

è¿™æ ·å°±å¯ä»¥è§£å†³ vercel çš„è¢«å¢™çš„é—®é¢˜äº†ã€‚

```bash
obsidian  cname.vercel-dns.com  èµ°ä»£ç†æ¨¡å¼
```

æµ‹è¯•æ˜¯å¦èµ°äº† cloudflare

```bash
curl -I https://obsidian.liuvv.com/   (åªè·å– HTTP å“åº”å¤´)

HTTP/2 200
date: Sun, 01 Jun 2025 14:20:55 GMT
server: cloudflare
```

# 20250530 Geo åˆ¤æ–­ IP åº“

geo åº“çš„ä¸€ä¸ªé‡è¦ç”¨é€”å°±æ˜¯ IP åœ°ç†å®šä½ã€‚è¿™ç±»åº“å¯ä»¥æ ¹æ® IP åœ°å€åˆ¤æ–­ç”¨æˆ·çš„åœ°ç†ä½ç½®ä¿¡æ¯ã€‚

åˆ¤æ–­ IP åœ°å€åº“ï¼ŒCity æ¯” Country å‡†ç¡®æ€§å¥½ä¸€äº›ã€‚

[https://github.com/P3TERX/GeoLite.mmdb](https://github.com/P3TERX/GeoLite.mmdb)

# 20250527 Gmail è½¬å‘ åˆ° Qq é‚®ç®±

è®¾ç½® -> è½¬å‘å’Œ POP/IMAP -> è½¬å‘ -> å°†æ”¶åˆ°çš„é‚®ä»¶çš„å‰¯æœ¬è½¬å‘ç»™ xxx@ (æ­£åœ¨ä½¿ç”¨) å’Œåœ¨æ”¶ä»¶ç®±ä¸­ä¿ç•™ Gmail çš„å‰¯æœ¬

# 20250527 Go-zero è·å– IP

```go
ctx = SetUserAddressValue(ctx, UserAddressValue{
    ClientIp: clientIp(r),
    RemoteIP: httpx.GetRemoteAddr(r),
})


func clientIp(r *http.Request) string {
	xForwardedFor := r.Header.Get("X-Forwarded-For")
	ip := strings.TrimSpace(strings.Split(xForwardedFor, ",")[0])
	if ip != "" {
		return ip
	}

	ip = strings.TrimSpace(r.Header.Get("X-Real-Ip"))
	if ip != "" {
		return ip
	}

	if ip, _, err := net.SplitHostPort(strings.TrimSpace(r.RemoteAddr)); err == nil {
		return ip
	}
	return ""
}




// GetRemoteAddr returns the peer address, supports X-Forward-For.
func GetRemoteAddr(r *http.Request) string {
	v := r.Header.Get(xForwardedFor)
	if len(v) > 0 {
		return v
	}

	return r.RemoteAddr
}
```

# 20250516 æ•°æ®åº“æ¯å¤©éƒ½è¦çœ‹å‹åŠ›

- è§£å†³ top sqlï¼Œé™ä½ CPU å’Œ Sessions
- <https://docs.aws.amazon.com/zh_cn/AmazonRDS/latest/AuroraUserGuide/USER_PerfInsights.UsingDashboard.Opening.html>
- åœ¨å½“å‰æ´»åŠ¨ä¸‹ï¼Œä¼šè¯é¡¹ç›®æ˜¾ç¤ºåœ¨è¿‡å»äº”åˆ†é’Ÿå†…å¹³å‡æ´»è·ƒä¼šè¯ä¸­çš„æ•°æ®åº“è´Ÿè½½ã€‚æ¡å½¢å›¾æ˜¾ç¤ºè´Ÿè½½é‡ã€‚å½“æ¡å½¢å›¾ä¸ºç©ºæ—¶ï¼Œæ•°æ®åº“å®ä¾‹å¤„äºç©ºé—²çŠ¶æ€ã€‚éšç€è´Ÿè½½çš„å¢åŠ ï¼Œæ¡å½¢å›¾ä¼šä»¥è“è‰²å¡«å……ã€‚å½“è´Ÿè½½è¶…è¿‡æ•°æ®åº“å®ä¾‹ç±»ä¸Šçš„è™šæ‹Ÿ CPU (vCPU) æ•°é‡æ—¶ï¼Œæ¡å½¢å›¾å˜ä¸ºçº¢è‰²ï¼Œè¡¨ç¤ºå¯èƒ½å‡ºç°ç“¶é¢ˆã€‚
- è¶…è¿‡ max vCPU çš„çº¿å°±ä¼šçº¢
- ![400](/img/user/Publish/æŠ€æœ¯å¡ç‰‡ç¬”è®°/11519596_b284cd0b-069e-4271-8ff4-4ce2aa13ad52.png)
- ![400](/img/user/Publish/æŠ€æœ¯å¡ç‰‡ç¬”è®°/11519596_cd2e9067-74ef-446f-e147-cedaf2d85067.png)
